<!-- setting current date and getting month -->
<% var date=new Date() %> <% var dt=date.getDate(); %> <% var
mt=date.toLocaleString('default', { month: 'short' }) %>

<!-- navbar with links to other pages -->
<nav class="navbar navbar-expand-lg navbar-dark bg-info">
  <a class="navbar-brand" href="#">HabiDaily</a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
    </ul>
  </div>
</nav>
<!-- main content starts -->
<main>
  <!-- heading container -->
  <div class="container d-flex justify-content-md-center">
    <h1 class="display-3">Weekly Report</h1>
  </div>
  <!-- table container -->
  <div class="container-fluid mt-3">
    <div class="table-responsive">
      <table class="table table-striped">
        <tr>
          <th>Habits</th>
          <!-- setting dates for 7 days -->
          <th><%= dt-6 %>-<%= mt %></th>
          <th><%= dt-5 %>-<%= mt %></th>
          <th><%= dt-4%>-<%= mt %></th>
          <th><%= dt-3 %>-<%= mt %></th>
          <th><%= dt-2 %>-<%= mt %></th>
          <th><%= dt-1 %>-<%= mt %></th>
          <th><%= dt %>-<%= mt %></th>
        </tr>
        <!-- looping through all habits passed from controller -->
        <% for(let i of habits) { %>

        <tr>
          <td><%= i.title %></td>
          <% for(let index=0;index<7;index++) { %>
          <td>
            <!-- dropdown container -->
            <div class="dropdown">
              <a
                class="btn btn-outline-success dropdown-toggle btn-sm"
                href="#"
                role="button"
                id="dropdownMenuLink"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <%= i.track[index] %>
              </a>
              <!-- dropdown menu container -->
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <!-- links to update status of habits -->
                <a
                  class="dropdown-item"
                  href="/update-status/<%=i.id%>/<%=index%>/None"
                  >None</a
                >

                <a
                  class="dropdown-item"
                  href="/update-status/<%=i.id%>/<%=index%>/Not Done"
                  >Not Done</a
                >

                <a
                  class="dropdown-item"
                  href="/update-status/<%=i.id%>/<%=index%>/Done"
                  >Done</a
                >
              </div>
            </div>
          </td>
          <% } %>
        </tr>
        <% } %>
      </table>
    </div>
  </div>
</main>
